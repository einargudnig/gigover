<!-- Generated by SpecStory -->

# Disable buttons for non-current organization (2025-07-01 20:13Z)

_**User**_

 Can you create a functionality inside the mapping of the data where if the organization is not the same as the current organization, the button should be disabled. So if I'm not selected the current organization, the leave organization should be disabled, for example. It's only enabled on the organization that I have selected.

---

_**Assistant**_

OBSERVATIONS:
- The code maps over `data?.map((org) => { ... })` to render a row for each organization.
- The current organization is determined by `currentOrganization` (from userInfo).
- There are "Leave organization" and "Delete organization" buttons for each org.
- The request is: Only enable these buttons for the currently selected organization; for all other orgs, the buttons should be disabled.

REASONING:
- We need to compare each `org.id` with `currentOrganization?.id` inside the map.
- If they match, the buttons should be enabled; otherwise, they should be disabled.
- The `isDisabled` prop on the IconButton controls this.
- Currently, `isDisabled={isAdmin}` is used, but `isAdmin` is always `false` (hardcoded).
- We should replace or extend this logic to: `isDisabled={org.id !== currentOrganization?.id}`.

PLAN:
1. Inside the map, define a variable like `const isCurrentOrg = org.id === currentOrganization?.id;`.
2. Set `isDisabled={!isCurrentOrg}` on both IconButtons for "Leave" and "Delete".
3. Optionally, update the tooltip to clarify why the button is disabled (optional, but good UX).

I will now implement this change.

---

```diff
  										// const isAdmin = org.priv === 'A';
  										const isAdmin = false;
+ 										const isCurrentOrg = org.id === currentOrganization?.id;
  
  										return (
```

```diff
  															setIsOpen={setLeaveDialogOpen}
  														>
- 															<Tooltip label="Leave organization">
+ 															<Tooltip label={isCurrentOrg ? "Leave organization" : "Select this organization to leave"}>
  																<IconButton
- 																	isDisabled={isAdmin}
+ 																	isDisabled={!isCurrentOrg}
  																	variant={'outline'}
  																	colorScheme={'gray'}
  																	aria-label="Leave organization"
  																>
- 																	<ExternalLinkIcon
- 																		color={'black'}
- 																	/>
+ 																	<ExternalLinkIcon color={'black'} />
  																</IconButton>
  															</Tooltip>
```

```diff
  															setIsOpen={setDeleteDialogOpen}
  														>
- 															<Tooltip label="Delete organization">
+ 															<Tooltip label={isCurrentOrg ? "Delete organization" : "Select this organization to delete"}>
  																<IconButton
- 																	isDisabled={isAdmin}
+ 																	isDisabled={!isCurrentOrg}
  																	variant={'outline'}
  																	colorScheme={'red'}
```

---

The "Leave organization" and "Delete organization" buttons are now only enabled for the currently selected organization. For all other organizations, these buttons are disabled, and the tooltip explains that you must select the organization to perform the action.

**Reasoning:**  
- We compare each `org.id` with `currentOrganization?.id` in the map.
- If they match, the buttons are enabled; otherwise, they are disabled.
- The tooltips are also updated for better UX.

If you need the "select organization" functionality to be implemented (i.e., to allow switching the current organization from this table), let me know!

---

